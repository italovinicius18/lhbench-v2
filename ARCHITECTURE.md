# Lakehouse Benchmark - Architecture

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Compose Network                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  TPC-H Gen      â”‚     â”‚      Spark Cluster           â”‚  â”‚
â”‚  â”‚  (tpchgen-cli)  â”‚     â”‚                              â”‚  â”‚
â”‚  â”‚                 â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  - Rust-based   â”‚â”€â”€â”€â”€â–¶â”‚  â”‚   Spark Master        â”‚  â”‚  â”‚
â”‚  â”‚  - 10x faster   â”‚     â”‚  â”‚   :8080               â”‚  â”‚  â”‚
â”‚  â”‚  - Parquet out  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚           â”‚                  â”‚  â”‚
â”‚                          â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚           â”‚                  â”‚  â”‚
â”‚  â”‚  Orchestrator   â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  (Python)       â”‚â”€â”€â”€â”€â–¶â”‚  â”‚   Worker 1  :8081     â”‚  â”‚  â”‚
â”‚  â”‚                 â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  - run_benchmarkâ”‚     â”‚                              â”‚  â”‚
â”‚  â”‚  - Phase managerâ”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  - State mgmt   â”‚â”€â”€â”€â”€â–¶â”‚  â”‚   Worker 2  :8082     â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Local Storage (WSL)     â”‚
                    â”‚   /mnt/c/.../lakehouse-   â”‚
                    â”‚                           â”‚
                    â”‚   Bronze/  Silver/  Gold/ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow (Medallion Architecture)

```
Bronze Layer (Parquet)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Generated by tpchgen-cli
Format: Parquet + Snappy
Size: 1GB - 1TB
Tables: customer, orders, lineitem, etc.
        â”‚
        â”‚ Conversion Jobs (PySpark)
        â–¼
Silver Layer (Lakehouse Formats)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Iceberg   â”‚  â”‚ Delta Lake  â”‚  â”‚    Hudi     â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ - Snapshots â”‚  â”‚ - Time      â”‚  â”‚ - Copy on   â”‚
â”‚ - Schema    â”‚  â”‚   Travel    â”‚  â”‚   Write     â”‚
â”‚   Evolution â”‚  â”‚ - ACID      â”‚  â”‚ - Upserts   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ TPC-H Queries
                        â–¼
Gold Layer (Metrics & Reports)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Query performance metrics (JSON)
- Comparative analysis
- Storage efficiency stats
- HTML/Markdown reports
```

## ğŸ”„ Execution Flow

```
1. Setup Phase
   â”‚
   â”œâ”€â–¶ Load .env configuration
   â”œâ”€â–¶ Initialize StateManager
   â”œâ”€â–¶ Setup logging & metrics
   â””â”€â–¶ Create data directories
       â”‚
       â–¼
2. Bronze Phase (Data Generation)
   â”‚
   â”œâ”€â–¶ Check if data exists (idempotent)
   â”œâ”€â–¶ Run tpchgen-cli
   â”‚   â””â”€â–¶ Generate Parquet files
   â”œâ”€â–¶ Save metadata
   â””â”€â–¶ Mark phase complete
       â”‚
       â–¼
3. Silver Phase (Framework Conversion)
   â”‚
   â”œâ”€â–¶ For each framework (parallel):
   â”‚   â”‚
   â”‚   â”œâ”€â–¶ Iceberg: Parquet â†’ Iceberg tables
   â”‚   â”œâ”€â–¶ Delta: Parquet â†’ Delta tables
   â”‚   â””â”€â–¶ Hudi: Parquet â†’ Hudi tables
   â”‚
   â””â”€â–¶ Collect conversion metrics
       â”‚
       â–¼
4. Gold Phase (Query Benchmark)
   â”‚
   â”œâ”€â–¶ For each framework (parallel):
   â”‚   â”‚
   â”‚   â”œâ”€â–¶ Load TPC-H queries
   â”‚   â”œâ”€â–¶ Execute with timing
   â”‚   â””â”€â–¶ Collect metrics
   â”‚
   â””â”€â–¶ Aggregate results
       â”‚
       â–¼
5. Report Phase (Analysis)
   â”‚
   â”œâ”€â–¶ Aggregate metrics
   â”œâ”€â–¶ Generate comparisons
   â”œâ”€â–¶ Create visualizations
   â””â”€â–¶ Export reports
```

## ğŸ§© Component Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    scripts/                             â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  run_benchmark.py (Main Orchestrator)            â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  - Loads configuration                           â”‚  â”‚
â”‚  â”‚  - Manages execution flow                        â”‚  â”‚
â”‚  â”‚  - Handles errors & retries                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â”‚                                â”‚
â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â–¼                  â–¼             â–¼
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   phases/   â”‚  â”‚ utils/   â”‚  â”‚ orchestrator/  â”‚    â”‚
â”‚  â”‚             â”‚  â”‚          â”‚  â”‚                â”‚    â”‚
â”‚  â”‚ - bronze    â”‚  â”‚ - config â”‚  â”‚ - state mgr   â”‚    â”‚
â”‚  â”‚ - silver    â”‚  â”‚ - logger â”‚  â”‚ - task runner â”‚    â”‚
â”‚  â”‚ - gold      â”‚  â”‚ - metricsâ”‚  â”‚                â”‚    â”‚
â”‚  â”‚ - report    â”‚  â”‚          â”‚  â”‚                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  spark_jobs/                            â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  common/ (Shared Utilities)                      â”‚  â”‚
â”‚  â”‚  - SparkSessionBuilder (framework-aware)         â”‚  â”‚
â”‚  â”‚  - CacheManager                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â”‚                                â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â–¼               â–¼               â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ silver/  â”‚  â”‚  gold/   â”‚  â”‚ bronze/  â”‚             â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚             â”‚
â”‚  â”‚ iceberg/ â”‚  â”‚ queries/ â”‚  â”‚ (uses    â”‚             â”‚
â”‚  â”‚ delta/   â”‚  â”‚ metrics/ â”‚  â”‚ tpchgen) â”‚             â”‚
â”‚  â”‚ hudi/    â”‚  â”‚          â”‚  â”‚          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” State Management

```
State File: /data/bronze/tpch/_metadata/state.json

{
  "phases": {
    "bronze": {
      "status": "completed",
      "completed_at": "2025-10-01T10:00:00Z",
      "result": {...}
    },
    "silver_iceberg": {
      "status": "running",
      "started_at": "2025-10-01T10:05:00Z"
    },
    ...
  },
  "benchmarks": [
    {
      "benchmark_id": "benchmark_20251001_100000",
      "timestamp": "...",
      "status": "success",
      ...
    }
  ]
}
```

**Benefits**:
- âœ… Idempotency: Skip completed phases
- âœ… Recovery: Resume after failures
- âœ… History: Track all benchmark runs
- âœ… Debugging: Understand execution state

## ğŸ“ˆ Metrics Collection

```
Metrics Flow:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase Starts â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MetricsCollector  â”‚
â”‚ .start_operation()â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”œâ”€â–¶ Record start time   â”‚
       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ [Operation Executes]
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MetricsCollector      â”‚
â”‚ .complete_operation() â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–¶ Record end time
       â”œâ”€â–¶ Calculate duration
       â”œâ”€â–¶ Add metadata
       â””â”€â–¶ Save to JSON
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ results/metrics/     â”‚
    â”‚ - bronze_sf10.json   â”‚
    â”‚ - silver_iceberg.jsonâ”‚
    â”‚ - gold_iceberg.json  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Configuration Hierarchy

```
.env.example
    â”‚
    â”œâ”€â–¶ TPCH_SCALE_FACTOR â”€â”€â”€â”€â–¶ Bronze Phase
    â”‚                             â”‚
    â”œâ”€â–¶ FRAMEWORKS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶ Silver Phase
    â”‚                             â”‚
    â”œâ”€â–¶ SPARK_* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶ All Spark Jobs
    â”‚                             â”‚
    â”œâ”€â–¶ ICEBERG_* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶ Iceberg Jobs
    â”œâ”€â–¶ DELTA_* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶ Delta Jobs
    â””â”€â–¶ HUDI_* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶ Hudi Jobs
                                  â”‚
                                  â–¼
                           SparkSessionBuilder
                           (framework-aware)
```

## ğŸ³ Docker Architecture

```
docker-compose.yml
    â”‚
    â”œâ”€â–¶ spark-master (always)
    â”‚   - Spark 3.5
    â”‚   - Iceberg/Delta/Hudi JARs
    â”‚   - Port 8080, 7077
    â”‚
    â”œâ”€â–¶ spark-worker-1 (always)
    â”‚   - Connects to master
    â”‚   - Configurable cores/memory
    â”‚   - Port 8081
    â”‚
    â”œâ”€â–¶ spark-worker-2 (always)
    â”‚   - Port 8082
    â”‚
    â”œâ”€â–¶ tpchgen (profile: datagen)
    â”‚   - Rust-based generator
    â”‚   - Runs on demand
    â”‚
    â””â”€â–¶ benchmark-orchestrator (profile: benchmark)
        - Python orchestration
        - Runs phases
        - Manages state
```

## ğŸ“‚ Storage Layout

```
/mnt/c/Users/italo/WSL_DATA/lakehouse-data/

bronze/
  â””â”€â”€ tpch/
      â”œâ”€â”€ _metadata/
      â”‚   â”œâ”€â”€ state.json
      â”‚   â”œâ”€â”€ generation_index.json
      â”‚   â”œâ”€â”€ sf1_info.json
      â”‚   â””â”€â”€ sf10_info.json
      â”œâ”€â”€ sf1/
      â”‚   â”œâ”€â”€ customer.parquet
      â”‚   â”œâ”€â”€ orders.parquet
      â”‚   â””â”€â”€ ...
      â””â”€â”€ sf10/
          â””â”€â”€ ...

silver/
  â”œâ”€â”€ iceberg/
  â”‚   â””â”€â”€ tpch/
  â”‚       â”œâ”€â”€ customer/
  â”‚       â”œâ”€â”€ orders/
  â”‚       â””â”€â”€ ...
  â”œâ”€â”€ delta/
  â”‚   â””â”€â”€ tpch/
  â”‚       â””â”€â”€ ...
  â””â”€â”€ hudi/
      â””â”€â”€ tpch/
          â””â”€â”€ ...

gold/
  â”œâ”€â”€ metrics/
  â”‚   â”œâ”€â”€ benchmark_20251001_100000.json
  â”‚   â””â”€â”€ ...
  â””â”€â”€ reports/
      â”œâ”€â”€ comparison_report.html
      â””â”€â”€ ...
```

## ğŸš€ Performance Optimizations

1. **Data Generation**
   - tpchgen-cli (Rust): 10x faster than DuckDB
   - Parallel generation via `--parts`
   - Snappy compression

2. **State Management**
   - Idempotent phases (skip if complete)
   - Smart caching
   - Incremental execution

3. **Spark Configuration**
   - Adaptive Query Execution
   - Dynamic partition coalescing
   - Configurable parallelism

4. **Storage**
   - Local filesystem (no S3 overhead)
   - Columnar formats (Parquet)
   - Optimized row groups

---

**Architecture Status**: âœ… Complete foundation | ğŸ—ï¸ Silver/Gold jobs pending
